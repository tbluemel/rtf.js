{"version":3,"file":"wmf.bundle.js","sources":["../src/wmfjs/Helper.ts","../src/wmfjs/Blob.ts","../src/wmfjs/Primitives.ts","../src/wmfjs/Region.ts","../src/wmfjs/Bitmap.ts","../src/wmfjs/Style.ts","../src/wmfjs/GDIContext.ts","../src/wmfjs/WMFRecords.ts","../src/wmfjs/Renderer.ts","../src/wmfjs/index.ts"],"sourcesContent":["/*\n\nThe MIT License (MIT)\n\nCopyright (c) 2015 Thomas Bluemel\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n\n// tslint:disable-next-line:interface-name\nexport interface WMFJSError {\n    name: string;\n    message: string;\n    stack: string;\n}\n\n// tslint:disable-next-line:variable-name\nexport const WMFJSError = function(this: WMFJSError, message: string) {\n    this.name = \"WMFJSError\";\n    this.message = message;\n    this.stack = (new Error()).stack;\n} as any as { new (message: string): WMFJSError; };\nWMFJSError.prototype = new Error();\n\nlet isLoggingEnabled = true;\nexport function loggingEnabled(enabled: boolean) {\n    isLoggingEnabled = enabled;\n}\n\nexport class Helper {\n    static GDI = {\n        METAHEADER_SIZE: 18,\n        BITMAPINFOHEADER_SIZE: 40,\n        BITMAPCOREHEADER_SIZE: 12,\n        MetafileType: {\n            MEMORYMETAFILE: 1,\n            DISKMETAFILE: 2,\n        },\n        MetafileVersion: {\n            METAVERSION100: 0x100,\n            METAVERSION300: 0x300,\n        },\n        RecordType: {\n            META_EOF: 0x0000,\n            META_REALIZEPALETTE: 0x0035,\n            META_SETPALENTRIES: 0x0037,\n            META_SETBKMODE: 0x0102,\n            META_SETMAPMODE: 0x0103,\n            META_SETROP2: 0x0104,\n            META_SETRELABS: 0x0105,\n            META_SETPOLYFILLMODE: 0x0106,\n            META_SETSTRETCHBLTMODE: 0x0107,\n            META_SETTEXTCHAREXTRA: 0x0108,\n            META_RESTOREDC: 0x0127,\n            META_RESIZEPALETTE: 0x0139,\n            META_DIBCREATEPATTERNBRUSH: 0x0142,\n            META_SETLAYOUT: 0x0149,\n            META_SETBKCOLOR: 0x0201,\n            META_SETTEXTCOLOR: 0x0209,\n            META_OFFSETVIEWPORTORG: 0x0211,\n            META_LINETO: 0x0213,\n            META_MOVETO: 0x0214,\n            META_OFFSETCLIPRGN: 0x0220,\n            META_FILLREGION: 0x0228,\n            META_SETMAPPERFLAGS: 0x0231,\n            META_SELECTPALETTE: 0x0234,\n            META_POLYGON: 0x0324,\n            META_POLYLINE: 0x0325,\n            META_SETTEXTJUSTIFICATION: 0x020a,\n            META_SETWINDOWORG: 0x020b,\n            META_SETWINDOWEXT: 0x020c,\n            META_SETVIEWPORTORG: 0x020d,\n            META_SETVIEWPORTEXT: 0x020e,\n            META_OFFSETWINDOWORG: 0x020f,\n            META_SCALEWINDOWEXT: 0x0410,\n            META_SCALEVIEWPORTEXT: 0x0412,\n            META_EXCLUDECLIPRECT: 0x0415,\n            META_INTERSECTCLIPRECT: 0x0416,\n            META_ELLIPSE: 0x0418,\n            META_FLOODFILL: 0x0419,\n            META_FRAMEREGION: 0x0429,\n            META_ANIMATEPALETTE: 0x0436,\n            META_TEXTOUT: 0x0521,\n            META_POLYPOLYGON: 0x0538,\n            META_EXTFLOODFILL: 0x0548,\n            META_RECTANGLE: 0x041b,\n            META_SETPIXEL: 0x041f,\n            META_ROUNDRECT: 0x061c,\n            META_PATBLT: 0x061d,\n            META_SAVEDC: 0x001e,\n            META_PIE: 0x081a,\n            META_STRETCHBLT: 0x0b23,\n            META_ESCAPE: 0x0626,\n            META_INVERTREGION: 0x012a,\n            META_PAINTREGION: 0x012b,\n            META_SELECTCLIPREGION: 0x012c,\n            META_SELECTOBJECT: 0x012d,\n            META_SETTEXTALIGN: 0x012e,\n            META_ARC: 0x0817,\n            META_CHORD: 0x0830,\n            META_BITBLT: 0x0922,\n            META_EXTTEXTOUT: 0x0a32,\n            META_SETDIBTODEV: 0x0d33,\n            META_DIBBITBLT: 0x0940,\n            META_DIBSTRETCHBLT: 0x0b41,\n            META_STRETCHDIB: 0x0f43,\n            META_DELETEOBJECT: 0x01f0,\n            META_CREATEPALETTE: 0x00f7,\n            META_CREATEPATTERNBRUSH: 0x01f9,\n            META_CREATEPENINDIRECT: 0x02fa,\n            META_CREATEFONTINDIRECT: 0x02fb,\n            META_CREATEBRUSHINDIRECT: 0x02fc,\n            META_CREATEREGION: 0x06ff,\n        },\n        MetafileEscapes: {\n            NEWFRAME: 0x0001,\n            ABORTDOC: 0x0002,\n            NEXTBAND: 0x0003,\n            SETCOLORTABLE: 0x0004,\n            GETCOLORTABLE: 0x0005,\n            FLUSHOUT: 0x0006,\n            DRAFTMODE: 0x0007,\n            QUERYESCSUPPORT: 0x0008,\n            SETABORTPROC: 0x0009,\n            STARTDOC: 0x000a,\n            ENDDOC: 0x000b,\n            GETPHYSPAGESIZE: 0x000c,\n            GETPRINTINGOFFSET: 0x000d,\n            GETSCALINGFACTOR: 0x000e,\n            META_ESCAPE_ENHANCED_METAFILE: 0x000f,\n            SETPENWIDTH: 0x0010,\n            SETCOPYCOUNT: 0x0011,\n            SETPAPERSOURCE: 0x0012,\n            PASSTHROUGH: 0x0013,\n            GETTECHNOLOGY: 0x0014,\n            SETLINECAP: 0x0015,\n            SETLINEJOIN: 0x0016,\n            SETMITERLIMIT: 0x0017,\n            BANDINFO: 0x0018,\n            DRAWPATTERNRECT: 0x0019,\n            GETVECTORPENSIZE: 0x001a,\n            GETVECTORBRUSHSIZE: 0x001b,\n            ENABLEDUPLEX: 0x001c,\n            GETSETPAPERBINS: 0x001d,\n            GETSETPRINTORIENT: 0x001e,\n            ENUMPAPERBINS: 0x001f,\n            SETDIBSCALING: 0x0020,\n            EPSPRINTING: 0x0021,\n            ENUMPAPERMETRICS: 0x0022,\n            GETSETPAPERMETRICS: 0x0023,\n            POSTSCRIPT_DATA: 0x0025,\n            POSTSCRIPT_IGNORE: 0x0026,\n            GETDEVICEUNITS: 0x002a,\n            GETEXTENDEDTEXTMETRICS: 0x0100,\n            GETPAIRKERNTABLE: 0x0102,\n            EXTTEXTOUT: 0x0200,\n            GETFACENAME: 0x0201,\n            DOWNLOADFACE: 0x0202,\n            METAFILE_DRIVER: 0x0801,\n            QUERYDIBSUPPORT: 0x0c01,\n            BEGIN_PATH: 0x1000,\n            CLIP_TO_PATH: 0x1001,\n            END_PATH: 0x1002,\n            OPEN_CHANNEL: 0x100e,\n            DOWNLOADHEADER: 0x100f,\n            CLOSE_CHANNEL: 0x1010,\n            POSTSCRIPT_PASSTHROUGH: 0x1013,\n            ENCAPSULATED_POSTSCRIPT: 0x1014,\n            POSTSCRIPT_IDENTIFY: 0x1015,\n            POSTSCRIPT_INJECTION: 0x1016,\n            CHECKJPEGFORMAT: 0x1017,\n            CHECKPNGFORMAT: 0x1018,\n            GET_PS_FEATURESETTING: 0x1019,\n            MXDC_ESCAPE: 0x101a,\n            SPCLPASSTHROUGH2: 0x11d8,\n        },\n        MapMode: {\n            MM_TEXT: 1,\n            MM_LOMETRIC: 2,\n            MM_HIMETRIC: 3,\n            MM_LOENGLISH: 4,\n            MM_HIENGLISH: 5,\n            MM_TWIPS: 6,\n            MM_ISOTROPIC: 7,\n            MM_ANISOTROPIC: 8,\n        },\n        StretchMode: {\n            BLACKONWHITE: 1,\n            WHITEONBLACK: 2,\n            COLORONCOLOR: 3,\n            HALFTONE: 4,\n        },\n        TextAlignmentMode: {\n            TA_UPDATECP: 1,\n            TA_RIGHT: 2,\n            TA_CENTER: 6,\n            TA_BOTTOM: 8,\n            TA_BASELINE: 24,\n            TA_RTLREADING: 256,\n        },\n        MixMode: {\n            TRANSPARENT: 1,\n            OPAQUE: 2,\n        },\n        VerticalTextAlignmentMode: {\n            VTA_BOTTOM: 2,\n            VTA_CENTER: 6,\n            VTA_LEFT: 8,\n            VTA_BASELINE: 24,\n        },\n        BrushStyle: {\n            BS_SOLID: 0,\n            BS_NULL: 1,\n            BS_HATCHED: 2,\n            BS_PATTERN: 3,\n            BS_INDEXED: 4,\n            BS_DIBPATTERN: 5,\n            BS_DIBPATTERNPT: 6,\n            BS_PATTERN8X8: 7,\n            BS_DIBPATTERN8X8: 8,\n            BS_MONOPATTERN: 9,\n        },\n        PenStyle: {\n            PS_SOLID: 0,\n            PS_DASH: 1,\n            PS_DOT: 2,\n            PS_DASHDOT: 3,\n            PS_DASHDOTDOT: 4,\n            PS_NULL: 5,\n            PS_INSIDEFRAME: 6,\n            PS_USERSTYLE: 7,\n            PS_ALTERNATE: 8,\n            PS_ENDCAP_SQUARE: 256,\n            PS_ENDCAP_FLAT: 512,\n            PS_JOIN_BEVEL: 4096,\n            PS_JOIN_MITER: 8192,\n        },\n        PolyFillMode: {\n            ALTERNATE: 1,\n            WINDING: 2,\n        },\n        ColorUsage: {\n            DIB_RGB_COLORS: 0,\n            DIB_PAL_COLORS: 1,\n            DIB_PAL_INDICES: 2,\n        },\n        PaletteEntryFlag: {\n            PC_RESERVED: 1,\n            PC_EXPLICIT: 2,\n            PC_NOCOLLAPSE: 4,\n        },\n        BitmapCompression: {\n            BI_RGB: 0,\n            BI_RLE8: 1,\n            BI_RLE4: 2,\n            BI_BITFIELDS: 3,\n            BI_JPEG: 4,\n            BI_PNG: 5,\n        },\n    };\n    static _uniqueId = 0;\n\n    static log(message: string) {\n        if (isLoggingEnabled) {\n            // tslint:disable-next-line:no-console\n            console.log(message);\n        }\n    }\n\n    static _makeUniqueId(prefix: string) {\n        return \"wmfjs_\" + prefix + (this._uniqueId++);\n    }\n\n    static _writeUint32Val(uint8arr: Uint8Array, pos: number, val: number) {\n        uint8arr[pos++] = val & 0xff;\n        uint8arr[pos++] = (val >>> 8) & 0xff;\n        uint8arr[pos++] = (val >>> 16) & 0xff;\n        uint8arr[pos++] = (val >>> 24) & 0xff;\n    }\n\n    static _blobToBinary(blob: Uint8Array) {\n        let ret = \"\";\n        const len = blob.length;\n        for (let i = 0; i < len; i++) {\n            ret += String.fromCharCode(blob[i]);\n        }\n        return ret;\n    }\n}\n","/*\n\nThe MIT License (MIT)\n\nCopyright (c) 2015 Thomas Bluemel\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n\nimport { WMFJSError } from \"./Helper\";\n\nexport class Blob {\n    blob: Blob | ArrayBuffer;\n    data: Uint8Array;\n    pos: number;\n\n    constructor(blob: Blob | ArrayBuffer, offset?: number) {\n        if (blob instanceof Blob) {\n            this.blob = blob.blob;\n            this.data = blob.data;\n            this.pos = offset || blob.pos;\n        } else {\n            this.blob = blob;\n            this.data = new Uint8Array(blob);\n            this.pos = offset || 0;\n        }\n    }\n\n    eof() {\n        return this.pos >= this.data.length;\n    }\n\n    seek(newpos: number) {\n        if (newpos < 0 || newpos > this.data.length) {\n            throw new WMFJSError(\"Invalid seek position\");\n        }\n        this.pos = newpos;\n    }\n\n    skip(cnt: number) {\n        const newPos = this.pos + cnt;\n        if (newPos > this.data.length) {\n            throw new WMFJSError(\"Unexpected end of file\");\n        }\n        this.pos = newPos;\n    }\n\n    readBinary(cnt: number) {\n        const end = this.pos + cnt;\n        if (end > this.data.length) {\n            throw new WMFJSError(\"Unexpected end of file\");\n        }\n        let ret = \"\";\n        while (cnt-- > 0) {\n            ret += String.fromCharCode(this.data[this.pos++]);\n        }\n        return ret;\n    }\n\n    readInt8() {\n        if (this.pos + 1 > this.data.length) {\n            throw new WMFJSError(\"Unexpected end of file\");\n        }\n        return this.data[this.pos++];\n    }\n\n    readUint8() {\n        return this.readInt8() >>> 0;\n    }\n\n    readInt32() {\n        if (this.pos + 4 > this.data.length) {\n            throw new WMFJSError(\"Unexpected end of file\");\n        }\n        let val = this.data[this.pos++];\n        val |= this.data[this.pos++] << 8;\n        val |= this.data[this.pos++] << 16;\n        val |= this.data[this.pos++] << 24;\n        return val;\n    }\n\n    readUint32() {\n        return this.readInt32() >>> 0;\n    }\n\n    readUint16() {\n        if (this.pos + 2 > this.data.length) {\n            throw new WMFJSError(\"Unexpected end of file\");\n        }\n        let val = this.data[this.pos++];\n        val |= this.data[this.pos++] << 8;\n        return val;\n    }\n\n    readInt16() {\n        let val = this.readUint16();\n        if (val > 32767) {\n            val -= 65536;\n        }\n        return val;\n    }\n\n    readString(length: number) {\n        if (this.pos + length > this.data.length) {\n            throw new WMFJSError(\"Unexpected end of file\");\n        }\n        let ret = \"\";\n        for (let i = 0; i < length; i++) {\n            ret += String.fromCharCode(this.data[this.pos++] >>> 0);\n        }\n        return ret;\n    }\n\n    readNullTermString(maxSize: number) {\n        let ret = \"\";\n        if (maxSize > 0) {\n            maxSize--;\n            for (let i = 0; i < maxSize; i++) {\n                if (this.pos + i + 1 > this.data.length) {\n                    throw new WMFJSError(\"Unexpected end of file\");\n                }\n                const byte = this.data[this.pos + i] >>> 0;\n                if (byte == 0) {\n                    break;\n                }\n                ret += String.fromCharCode(byte);\n            }\n        }\n        return ret;\n    }\n}\n","/*\n\nThe MIT License (MIT)\n\nCopyright (c) 2015 Thomas Bluemel\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n\nimport { Blob } from \"./Blob\";\nimport { WMFJSError } from \"./Helper\";\n\nexport class PointS {\n    x: number;\n    y: number;\n\n    constructor(reader: Blob, x?: number, y?: number) {\n        if (reader != null) {\n            this.x = reader.readInt16();\n            this.y = reader.readInt16();\n        } else {\n            this.x = x;\n            this.y = y;\n        }\n    }\n\n    clone() {\n        return new PointS(null, this.x, this.y);\n    }\n\n    toString() {\n        return \"{x: \" + this.x + \", y: \" + this.y + \"}\";\n    }\n}\n\nexport class Rect {\n    bottom: number;\n    right: number;\n    top: number;\n    left: number;\n\n    constructor(reader: Blob, left?: number, top?: number, right?: number, bottom?: number) {\n        if (reader != null) {\n            this.bottom = reader.readInt16();\n            this.right = reader.readInt16();\n            this.top = reader.readInt16();\n            this.left = reader.readInt16();\n        } else {\n            this.bottom = bottom;\n            this.right = right;\n            this.top = top;\n            this.left = left;\n        }\n    }\n\n    clone() {\n        return new Rect(null, this.left, this.top, this.right, this.bottom);\n    }\n\n    toString() {\n        return \"{left: \" + this.left + \", top: \" + this.top + \", right: \" + this.right + \", bottom: \" + this.bottom + \"}\";\n    }\n\n    empty() {\n        return this.left >= this.right || this.top >= this.bottom;\n    }\n\n    intersect(rect: Rect) {\n        if (this.empty() || rect.empty()) {\n            return null;\n        }\n        if (this.left >= rect.right || this.top >= rect.bottom ||\n            this.right <= rect.left || this.bottom <= rect.top) {\n            return null;\n        }\n        return new Rect(null, Math.max(this.left, rect.left), Math.max(this.top, rect.top), Math.min(this.right, rect.right), Math.min(this.bottom, rect.bottom));\n    }\n}\n\nexport class Obj {\n    type: string;\n\n    constructor(type: string) {\n        this.type = type;\n    }\n\n    clone(): Obj {\n        throw new WMFJSError(\"clone not implemented\");\n    }\n\n    toString() {\n        throw new WMFJSError(\"toString not implemented\");\n    }\n}\n","/*\n\nThe MIT License (MIT)\n\nCopyright (c) 2015 Thomas Bluemel\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n\nimport { Blob } from \"./Blob\";\nimport { Helper, WMFJSError } from \"./Helper\";\nimport { Obj, Rect } from \"./Primitives\";\n\nexport class Region extends Obj {\n    bounds: Rect;\n    scans: Scan[];\n    complexity: number;\n\n    constructor(reader: Blob, copy?: Region) {\n        super(\"region\");\n        if (reader != null) {\n            reader.skip(2);\n            if (reader.readInt16() != 6) {\n                throw new WMFJSError(\"Invalid region identifier\");\n            }\n            reader.skip(2);\n            const rgnSize = reader.readInt16();\n            const scanCnt = reader.readInt16();\n            reader.skip(2);\n            // note, Rect in reverse, can't use Rect(reader) directly\n            const left = reader.readInt16();\n            const top = reader.readInt16();\n            const right = reader.readInt16();\n            const bottom = reader.readInt16();\n            this.bounds = new Rect(null, left, top, right, bottom);\n            this.scans = [];\n            for (let i = 0; i < scanCnt; i++) {\n                this.scans.push(new Scan(reader));\n            }\n            this._updateComplexity();\n        } else if (copy != null) {\n            this.bounds = copy.bounds != null ? copy.bounds.clone() : null;\n            if (copy.scans != null) {\n                this.scans = [];\n                for (let i = 0; i < copy.scans.length; i++) {\n                    this.scans.push(copy.scans[i].clone());\n                }\n            } else {\n                this.scans = null;\n            }\n            this.complexity = copy.complexity;\n        } else {\n            this.bounds = null;\n            this.scans = null;\n            this.complexity = 0;\n        }\n    }\n\n    clone() {\n        return new Region(null, this);\n    }\n\n    toString() {\n        const _complexity = [\"null\", \"simple\", \"complex\"];\n        return \"{complexity: \" + _complexity[this.complexity] + \" bounds: \" + (this.bounds != null ? this.bounds.toString() : \"[none]\") + \" #scans: \" + (this.scans != null ? this.scans.length : \"[none]\") + \"}\";\n    }\n\n    _updateComplexity() {\n        if (this.bounds == null) {\n            this.complexity = 0;\n            this.scans = null;\n        } else if (this.bounds.empty()) {\n            this.complexity = 0;\n            this.scans = null;\n            this.bounds = null;\n        } else if (this.scans == null) {\n            this.complexity = 1;\n        } else {\n            this.complexity = 2;\n            if (this.scans.length == 1) {\n                const scan = this.scans[0];\n                if (scan.top == this.bounds.top && scan.bottom == this.bounds.bottom && scan.scanlines.length == 1) {\n                    const scanline = scan.scanlines[0];\n                    if (scanline.left == this.bounds.left && scanline.right == this.bounds.right) {\n                        this.scans = null;\n                        this.complexity = 1;\n                    }\n                }\n            }\n        }\n    }\n\n    subtract(rect: Rect) {\n        Helper.log(\"[wmf] Region \" + this.toString() + \" subtract \" + rect.toString());\n\n        if (this.bounds != null) {\n            const isect = this.bounds.intersect(rect);\n            if (isect != null) { // Only need to do anything if there is any chance of an overlap\n                if (this.scans == null) {\n                    // We currently have a simple region and there is some kind of an overlap.\n                    // We need to create scanlines now.  Simplest method is to fake one scan line\n                    // that equals the simple region and re-use the same logic as for complex regions\n                    this.scans = [];\n                    this.scans.push( new Scan(null, null, this.bounds.top, this.bounds.bottom,\n                        [{left: this.bounds.left, right: this.bounds.right}]));\n                    this.complexity = 2;\n                }\n\n                // We (now) have a complex region.  First we skip any scans that are entirely above rect.top\n                // The first scan that falls partially below rect.top needs to be split into two scans.\n                let si = 0;\n                while (si < this.scans.length) {\n                    const scan = this.scans[si];\n                    if (scan.bottom >= rect.top) {\n                        // We need to clone this scan into two so that we can subtract from the second one\n                        const cloned = scan.clone();\n                        scan.bottom = rect.top - 1;\n                        cloned.top = rect.top;\n                        if (scan.top >= scan.bottom) {\n                            this.scans[si] = cloned;\n                        } else {\n                            Helper.log(\"[wmf] Region split top scan \" + si + \" for substraction\");\n                            this.scans.splice(++si, 0, cloned);\n                        }\n                        break;\n                    }\n                    si++;\n                }\n\n                // Now find the first one that falls at least partially below rect.bottom, which needs to be\n                // split if it is only partially below rect.bottom\n                const first = si;\n                while (si < this.scans.length) {\n                    const scan = this.scans[si];\n                    if (scan.top > rect.bottom) {\n                        break;\n                    }\n                    if (scan.bottom > rect.bottom) {\n                        // We need to clone this scan into two so that we can subtract from the first one\n                        const cloned = scan.clone();\n                        scan.bottom = rect.bottom;\n                        cloned.top = rect.bottom + 1;\n                        if (scan.top >= scan.bottom) {\n                            this.scans[si] = cloned;\n                        } else {\n                            Helper.log(\"[wmf] Region split bottom scan \" + si + \" for substraction\");\n                            this.scans.splice(++si, 0, cloned);\n                        }\n                        break;\n                    }\n                    si++;\n                }\n\n                // Now perform a subtraction on each scan in between rect.top and rect.bottom.  Because we\n                // cloned scans that partially overlapped rect.top and rect.bottom, we don't have to\n                // account for this anymore.\n                if (first < this.scans.length) {\n                    let last = si;\n                    si = first;\n                    while (si < last) {\n                        const scan = this.scans[si];\n                        if (!scan.subtract(rect.left, rect.right)) {\n                            Helper.log(\"[wmf] Region remove now empty scan \" + si + \" due to subtraction\");\n                            this.scans.splice(si, 1);\n                            last--;\n                            continue;\n                        }\n\n                        si++;\n                    }\n                }\n\n                // Update bounds\n                if (this.scans != null) {\n                    let left;\n                    let top;\n                    let right;\n                    let bottom;\n                    const len = this.scans.length;\n                    for (let i = 0; i < len; i++) {\n                        const scan = this.scans[i];\n                        if (i == 0) {\n                            top = scan.top;\n                        }\n                        if (i == len - 1) {\n                            bottom = scan.bottom;\n                        }\n\n                        const slen = scan.scanlines.length;\n                        if (slen > 0) {\n                            let scanline = scan.scanlines[0];\n                            if (left == null || scanline.left < left) {\n                                left = scanline.left;\n                            }\n                            scanline = scan.scanlines[slen - 1];\n                            if (right == null || scanline.right > right) {\n                                right = scanline.right;\n                            }\n                        }\n                    }\n\n                    if (left != null && top != null && right != null && bottom != null) {\n                        this.bounds = new Rect(null, left, top, right, bottom);\n                        this._updateComplexity();\n                    } else {\n                        // This has to be a null region now\n                        this.bounds = null;\n                        this.scans = null;\n                        this.complexity = 0;\n                    }\n                } else {\n                    this._updateComplexity();\n                }\n            }\n        }\n\n        Helper.log(\"[wmf] Region subtraction -> \" + this.toString());\n    }\n\n    intersect(rect: Rect) {\n        Helper.log(\"[wmf] Region \" + this.toString() + \" intersect with \" + rect.toString());\n        if (this.bounds != null) {\n            this.bounds = this.bounds.intersect(rect);\n            if (this.bounds != null) {\n                if (this.scans != null) {\n                    let si = 0;\n                    // Remove any scans that are entirely above the new bounds.top\n                    while (si < this.scans.length) {\n                        const scan = this.scans[si];\n                        if (scan.bottom < this.bounds.top) {\n                            si++;\n                        } else {\n                            break;\n                        }\n                    }\n                    if (si > 0) {\n                        Helper.log(\"[wmf] Region remove \" + si + \" scans from top\");\n                        this.scans.splice(0, si);\n\n                        // Adjust the first scan's top to match the new bounds.top\n                        if (this.scans.length > 0) {\n                            this.scans[0].top = this.bounds.top;\n                        }\n                    }\n\n                    // Get rid of anything that falls outside the new bounds.left/bounds.right\n                    si = 0;\n                    while (si < this.scans.length) {\n                        const scan = this.scans[si];\n                        if (scan.top > this.bounds.bottom) {\n                            // Remove this and all remaining scans that fall entirely below the new bounds.bottom\n                            Helper.log(\"[wmf] Region remove \" + (this.scans.length - si) + \" scans from bottom\");\n                            this.scans.splice(si, this.scans.length - si);\n                            break;\n                        }\n                        if (!scan.intersect(this.bounds.left, this.bounds.right)) {\n                            // Remove now empty scan\n                            Helper.log(\"[wmf] Region remove now empty scan \" + si + \" due to intersection\");\n                            this.scans.splice(si, 1);\n                            continue;\n                        }\n                        si++;\n                    }\n\n                    // If there are any scans left, adjust the last one's bottom to the new bounds.bottom\n                    if (this.scans.length > 0) {\n                        this.scans[this.scans.length - 1].bottom = this.bounds.bottom;\n                    }\n\n                    this._updateComplexity();\n                }\n            } else {\n                this.scans = null;\n                this.complexity = 0;\n            }\n        }\n        Helper.log(\"[wmf] Region intersection -> \" + this.toString());\n    }\n\n    offset(offX: number, offY: number) {\n        if (this.bounds != null) {\n            this.bounds.left += offX;\n            this.bounds.top += offY;\n            this.bounds.right += offX;\n            this.bounds.bottom += offY;\n        }\n\n        if (this.scans != null) {\n            const slen = this.scans.length;\n            for (let si = 0; si < slen; si++) {\n                const scan = this.scans[si];\n                scan.top += offY;\n                scan.bottom += offY;\n\n                const len = scan.scanlines.length;\n                for (let i = 0; i < len; i++) {\n                    const scanline = scan.scanlines[i];\n                    scanline.left += offX;\n                    scanline.right += offX;\n                }\n            }\n        }\n    }\n}\n\nexport function CreateSimpleRegion(left: number, top: number, right: number, bottom: number) {\n    const rgn = new Region(null, null);\n    rgn.bounds = new Rect(null, left, top, right, bottom);\n    rgn._updateComplexity();\n    return rgn;\n}\n\nexport class Scan {\n    top: number;\n    bottom: number;\n    scanlines: Array<{left: number, right: number}>;\n\n    constructor(reader: Blob, copy?: Scan, top?: number, bottom?: number, scanlines?: Array<{left: number, right: number}>) {\n        if (reader != null) {\n            const cnt = reader.readUint16();\n            this.top = reader.readUint16();\n            this.bottom = reader.readUint16();\n            this.scanlines = [];\n            for (let i = 0; i < cnt; i++) {\n                const left = reader.readUint16();\n                const right = reader.readUint16();\n                this.scanlines.push({left, right});\n            }\n            reader.skip(2);\n        } else if (copy != null) {\n            this.top = copy.top;\n            this.bottom = copy.bottom;\n            this.scanlines = [];\n            for (let i = 0; i < copy.scanlines.length; i++) {\n                const scanline = copy.scanlines[i];\n                this.scanlines.push({left: scanline.left, right: scanline.right});\n            }\n        } else {\n            this.top = top;\n            this.bottom = bottom;\n            this.scanlines = scanlines;\n        }\n    }\n\n    clone() {\n        return new Scan(null, this);\n    }\n\n    subtract(left: number, right: number) {\n        let i;\n\n        // Keep everything on the left side\n        i = 0;\n        while (i < this.scanlines.length) {\n            const scanline = this.scanlines[i];\n            if (scanline.left <= left) {\n                if (scanline.right >= left) {\n                    scanline.right = left - 1;\n                    if (scanline.left >= scanline.right) {\n                        this.scanlines.splice(i, 1);\n                        continue;\n                    }\n                }\n                i++;\n            } else {\n                break;\n            }\n        }\n\n        // Find the first one that may exceed to the right side\n        const first = i;\n        let cnt = 0;\n        while (i < this.scanlines.length) {\n            const scanline = this.scanlines[i];\n            if (scanline.right > right) {\n                scanline.left = right;\n                cnt = i - first;\n                if (scanline.left >= scanline.right) {\n                    cnt++;\n                }\n                break;\n            }\n            i++;\n        }\n\n        // Delete everything we're subtracting\n        if (cnt > 0 && first < this.scanlines.length) {\n            this.scanlines.splice(first, cnt);\n        }\n\n        return this.scanlines.length > 0;\n    }\n\n    intersect(left: number, right: number) {\n        // Get rid of anything that falls entirely outside to the left\n        for (let i = 0; i < this.scanlines.length; i++) {\n            const scanline = this.scanlines[i];\n            if (scanline.left >= left || scanline.right >= left) {\n                if (i > 0) {\n                    this.scanlines.splice(0, i);\n                }\n                break;\n            }\n        }\n\n        if (this.scanlines.length > 0) {\n            // Adjust the first to match the left, if needed\n            let scanline = this.scanlines[0];\n            if (scanline.left < left) {\n                scanline.left = left;\n            }\n\n            // Get rid of anything that falls entirely outside to the right\n            for (let i = 0; i < this.scanlines.length; i++) {\n                scanline = this.scanlines[i];\n                if (scanline.left > right) {\n                    this.scanlines.splice(i, this.scanlines.length - i);\n                    break;\n                }\n            }\n\n            if (this.scanlines.length > 0) {\n                // Adjust the last to match the right, if needed\n                scanline = this.scanlines[this.scanlines.length - 1];\n                if (scanline.right > right) {\n                    scanline.right = right;\n                }\n            }\n        }\n        return this.scanlines.length > 0;\n    }\n\n    toString() {\n        return \"{ #scanlines: \" + this.scanlines.length + \"}\";\n    }\n}\n","/*\n\nThe MIT License (MIT)\n\nCopyright (c) 2015 Thomas Bluemel\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n\nimport { Blob } from \"./Blob\";\nimport { Helper, WMFJSError } from \"./Helper\";\n\nexport class BitmapBase {\n    getWidth() {\n        throw new WMFJSError(\"getWidth not implemented\");\n    }\n\n    getHeight() {\n        throw new WMFJSError(\"getHeight not implemented\");\n    }\n}\n\nexport class BitmapCoreHeader {\n    width: number;\n    height: number;\n    planes: number;\n    bitcount: number;\n\n    constructor(reader: Blob, skipsize: boolean) {\n        if (skipsize) {\n            reader.skip(4);\n        }\n        this.width = reader.readUint16();\n        this.height = reader.readUint16();\n        this.planes = reader.readUint16();\n        this.bitcount = reader.readUint16();\n    }\n\n    colors() {\n        return this.bitcount <= 8 ? 1 << this.bitcount : 0;\n    }\n}\n\nexport class BitmapInfoHeader {\n    width: number;\n    height: number;\n    planes: number;\n    bitcount: number;\n    compression: number;\n    sizeimage: number;\n    xpelspermeter: number;\n    ypelspermeter: number;\n    clrused: number;\n    clrimportant: number;\n\n    constructor(reader: Blob, skipsize: boolean) {\n        if (skipsize) {\n            reader.skip(4);\n        }\n        this.width = reader.readInt32();\n        this.height = reader.readInt32();\n        this.planes = reader.readUint16();\n        this.bitcount = reader.readUint16();\n        this.compression = reader.readUint32();\n        this.sizeimage = reader.readUint32();\n        this.xpelspermeter = reader.readInt32();\n        this.ypelspermeter = reader.readInt32();\n        this.clrused = reader.readUint32();\n        this.clrimportant = reader.readUint32();\n    }\n\n    colors() {\n        if (this.clrused != 0) {\n            return this.clrused < 256 ? this.clrused : 256;\n        } else {\n            return this.bitcount > 8 ? 0 : 1 << this.bitcount;\n        }\n    }\n}\n\nexport class BitmapInfo extends BitmapBase {\n    _reader: Blob;\n    _offset: number;\n    _usergb: boolean;\n    _infosize: number;\n    _header: BitmapCoreHeader | BitmapInfoHeader;\n\n    constructor(reader: Blob, usergb: boolean) {\n        super();\n        this._reader = reader;\n        this._offset = reader.pos;\n        this._usergb = usergb;\n        const hdrsize = reader.readUint32();\n        this._infosize = hdrsize;\n        if (hdrsize == Helper.GDI.BITMAPCOREHEADER_SIZE) {\n            this._header = new BitmapCoreHeader(reader, false);\n            this._infosize += this._header.colors() * (usergb ? 3 : 2);\n        } else {\n            this._header = new BitmapInfoHeader(reader, false);\n            const masks = (this._header as BitmapInfoHeader).compression == Helper.GDI.BitmapCompression.BI_BITFIELDS ? 3 : 0;\n            if (hdrsize <= Helper.GDI.BITMAPINFOHEADER_SIZE + (masks * 4)) {\n                this._infosize = Helper.GDI.BITMAPINFOHEADER_SIZE + (masks * 4);\n            }\n            this._infosize += this._header.colors() * (usergb ? 4 : 2);\n        }\n    }\n\n    getWidth() {\n        return this._header.width;\n    }\n\n    getHeight() {\n        return Math.abs(this._header.height);\n    }\n\n    infosize() {\n        return this._infosize;\n    }\n\n    header() {\n        return this._header;\n    }\n}\n\nexport class DIBitmap extends BitmapBase {\n    _reader: Blob;\n    _offset: number;\n    _size: number;\n    _info: BitmapInfo;\n\n    constructor(reader: Blob, size: number) {\n        super();\n        this._reader = reader;\n        this._offset = reader.pos;\n        this._size = size;\n        this._info = new BitmapInfo(reader, true);\n    }\n\n    getWidth() {\n        return this._info.getWidth();\n    }\n\n    getHeight() {\n        return this._info.getHeight();\n    }\n\n    makeBitmapFileHeader() {\n        const buf = new ArrayBuffer(14);\n        const view = new Uint8Array(buf);\n        view[0] = 0x42;\n        view[1] = 0x4d;\n        Helper._writeUint32Val(view, 2, this._size + 14);\n        Helper._writeUint32Val(view, 10, this._info.infosize() + 14);\n        return Helper._blobToBinary(view);\n    }\n\n    base64ref() {\n        const prevpos = this._reader.pos;\n        this._reader.seek(this._offset);\n        let mime = \"image/bmp\";\n        const header = this._info.header();\n        let data;\n        if (header instanceof  BitmapInfoHeader && header.compression != null) {\n            switch (header.compression) {\n                case Helper.GDI.BitmapCompression.BI_JPEG:\n                    mime = \"data:image/jpeg\";\n                    break;\n                case Helper.GDI.BitmapCompression.BI_PNG:\n                    mime = \"data:image/png\";\n                    break;\n                default:\n                    data = this.makeBitmapFileHeader();\n                    break;\n            }\n        } else {\n            data = this.makeBitmapFileHeader();\n        }\n\n        if (data != null) {\n            data += this._reader.readBinary(this._size);\n        } else {\n            data = this._reader.readBinary(this._size);\n        }\n\n        const ref = \"data:\" + mime + \";base64,\" + btoa(data);\n        this._reader.seek(prevpos);\n        return ref;\n    }\n}\n\nexport class Bitmap16 extends BitmapBase {\n    _reader: Blob;\n    _offset: number;\n    _size: number;\n    type: number;\n    width: number;\n    height: number;\n    widthBytes: number;\n    planes: number;\n    bitsPixel: number;\n    bitsOffset: number;\n    bitsSize: number;\n    constructor(reader: Blob, size: number | Bitmap16) {\n        super();\n        if (reader != null) {\n            size = size as number;\n            this._reader = reader;\n            this._offset = reader.pos;\n            this._size = size;\n            this.type = reader.readInt16();\n            this.width = reader.readInt16();\n            this.height = reader.readInt16();\n            this.widthBytes = reader.readInt16();\n            this.planes = reader.readUint8();\n            this.bitsPixel = reader.readUint8();\n            this.bitsOffset = reader.pos;\n            this.bitsSize = (((this.width * this.bitsPixel + 15) >> 4) << 1) * this.height;\n            if (this.bitsSize > size - 10) {\n                throw new WMFJSError(\"Bitmap should have \" + this.bitsSize + \" bytes, but has \" + (size - 10));\n            }\n        } else {\n            const copy = size as Bitmap16;\n            this._reader = copy._reader;\n            this._offset = copy._offset;\n            this._size = copy._size;\n            this.type = copy.type;\n            this.width = copy.width;\n            this.height = copy.height;\n            this.widthBytes = copy.widthBytes;\n            this.planes = copy.planes;\n            this.bitsPixel = copy.bitsPixel;\n            this.bitsOffset = copy.bitsOffset;\n            this.bitsSize = copy.bitsSize;\n        }\n    }\n\n    getWidth() {\n        return this.width;\n    }\n\n    getHeight() {\n        return this.height;\n    }\n\n    clone() {\n        return new Bitmap16(null, this);\n    }\n}\n\nexport class PatternBitmap16 extends Bitmap16 {\n    constructor(reader: Blob, size: number | Bitmap16) {\n        super(reader, size);\n        if (reader != null) {\n            this.bitsOffset += 22; // skip bits (4 bytes) + reserved (18 bytes)\n        }\n    }\n\n    clone(): PatternBitmap16 {\n        return new PatternBitmap16(null, this);\n    }\n}\n","/*\n\nThe MIT License (MIT)\n\nCopyright (c) 2015 Thomas Bluemel\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n\nimport { Bitmap16, DIBitmap, PatternBitmap16 } from \"./Bitmap\";\nimport { Blob } from \"./Blob\";\nimport { Helper } from \"./Helper\";\nimport { Obj, PointS } from \"./Primitives\";\n\nexport class ColorRef {\n    r: number;\n    g: number;\n    b: number;\n\n    constructor(reader: Blob, r?: number, g?: number, b?: number) {\n        if (reader != null) {\n            this.r = reader.readUint8();\n            this.g = reader.readUint8();\n            this.b = reader.readUint8();\n            reader.skip(1);\n        } else {\n            this.r = r;\n            this.g = g;\n            this.b = b;\n        }\n    }\n\n    clone() {\n        return new ColorRef(null, this.r, this.g, this.b);\n    }\n\n    toHex() {\n        const rgb = (this.r << 16) | (this.g << 8) | this.b;\n        return (0x1000000 + rgb).toString(16).slice(1);\n    }\n\n    toString() {\n        return \"{r: \" + this.r + \", g: \" + this.g + \", b: \" + this.b + \"}\";\n    }\n}\n\nexport class Font extends Obj {\n    height: number;\n    width: number;\n    escapement: number;\n    orientation: number;\n    weight: number;\n    italic: number;\n    underline: number;\n    strikeout: number;\n    charset: number;\n    outprecision: number;\n    clipprecision: number;\n    quality: number;\n    pitch: number;\n    family: number;\n    facename: string;\n\n    constructor(reader: Blob, copy: Font | number) {\n        super(\"font\");\n        if (reader != null) {\n            this.height = reader.readInt16();\n            this.width = reader.readInt16();\n            this.escapement = reader.readInt16();\n            this.orientation = reader.readInt16();\n            this.weight = reader.readInt16();\n            this.italic = reader.readUint8();\n            this.underline = reader.readUint8();\n            this.strikeout = reader.readUint8();\n            this.charset = reader.readUint8();\n            this.outprecision = reader.readUint8();\n            this.clipprecision = reader.readUint8();\n            this.quality = reader.readUint8();\n            const pitchAndFamily = reader.readUint8();\n            this.pitch = pitchAndFamily & 0xf; // TODO: double check\n            this.family = (pitchAndFamily >> 6) & 0x3; // TODO: double check\n\n            const dataLength = copy as number;\n            const start = reader.pos;\n            this.facename = reader.readNullTermString(Math.min(dataLength - (reader.pos - start), 32));\n        } else if (copy != null) {\n            copy = copy as Font;\n            this.height = copy.height;\n            this.width = copy.width;\n            this.escapement = copy.escapement;\n            this.orientation = copy.orientation;\n            this.weight = copy.weight;\n            this.italic = copy.italic;\n            this.underline = copy.underline;\n            this.strikeout = copy.strikeout;\n            this.charset = copy.charset;\n            this.outprecision = copy.outprecision;\n            this.clipprecision = copy.clipprecision;\n            this.quality = copy.quality;\n            this.pitch = copy.pitch;\n            this.family = copy.family;\n            this.facename = copy.facename;\n        } else {\n            // TODO: Values for a default font?\n            this.height = -80;\n            this.width = 0;\n            this.escapement = 0;\n            this.orientation = 0;\n            this.weight = 400;\n            this.italic = 0;\n            this.underline = 0;\n            this.strikeout = 0;\n            this.charset = 0;\n            this.outprecision = 0;\n            this.clipprecision = 0;\n            this.quality = 0;\n            this.pitch = 0;\n            this.family = 0;\n            this.facename = \"Helvetica\";\n        }\n    }\n\n    clone() {\n        return new Font(null, this);\n    }\n\n    toString() {\n        return JSON.stringify(this);\n    }\n}\n\nexport class Brush extends Obj {\n    style: number;\n    color: ColorRef;\n    pattern: Bitmap16;\n    colorusage: number;\n    dibpatternpt: DIBitmap;\n    hatchstyle: number;\n\n    constructor(reader: Blob, copy: Brush | number, forceDibPattern?: boolean | PatternBitmap16) {\n        super(\"brush\");\n        if (reader != null) {\n            const dataLength = copy as number;\n            const start = reader.pos;\n\n            if (forceDibPattern === true || forceDibPattern === false) {\n                this.style = reader.readUint16();\n                if (forceDibPattern && this.style != Helper.GDI.BrushStyle.BS_PATTERN) {\n                    this.style = Helper.GDI.BrushStyle.BS_DIBPATTERNPT;\n                }\n                switch (this.style) {\n                    case Helper.GDI.BrushStyle.BS_SOLID:\n                        this.color = new ColorRef(reader);\n                        break;\n                    case Helper.GDI.BrushStyle.BS_PATTERN:\n                        reader.skip(forceDibPattern ? 2 : 6);\n                        this.pattern = new Bitmap16(reader, dataLength - (reader.pos - start));\n                        break;\n                    case Helper.GDI.BrushStyle.BS_DIBPATTERNPT:\n                        this.colorusage = forceDibPattern ? reader.readUint16() : reader.readUint32();\n                        if (!forceDibPattern) {\n                            reader.skip(2);\n                        }\n                        this.dibpatternpt = new DIBitmap(reader, dataLength - (reader.pos - start));\n                        break;\n                    case Helper.GDI.BrushStyle.BS_HATCHED:\n                        this.color = new ColorRef(reader);\n                        this.hatchstyle = reader.readUint16();\n                        break;\n                }\n            } else if (forceDibPattern instanceof PatternBitmap16) {\n                this.style = Helper.GDI.BrushStyle.BS_PATTERN;\n                this.pattern = forceDibPattern;\n            }\n        } else if (copy != null) {\n            copy = copy as Brush;\n            this.style = copy.style;\n            switch (this.style) {\n                case Helper.GDI.BrushStyle.BS_SOLID:\n                    this.color = copy.color.clone();\n                    break;\n                case Helper.GDI.BrushStyle.BS_PATTERN:\n                    this.pattern = copy.pattern.clone();\n                    break;\n                case Helper.GDI.BrushStyle.BS_DIBPATTERNPT:\n                    this.colorusage = copy.colorusage;\n                    this.dibpatternpt = copy.dibpatternpt;\n                    break;\n                case Helper.GDI.BrushStyle.BS_HATCHED:\n                    this.color = copy.color.clone();\n                    this.hatchstyle = copy.hatchstyle;\n                    break;\n            }\n        }\n    }\n\n    clone() {\n        return new Brush(null, this);\n    }\n\n    toString() {\n        let ret = \"{style: \" + this.style;\n        switch (this.style) {\n            case Helper.GDI.BrushStyle.BS_SOLID:\n                ret += \", color: \" + this.color.toString();\n                break;\n            case Helper.GDI.BrushStyle.BS_DIBPATTERNPT:\n                ret += \", colorusage: \" + this.colorusage;\n                break;\n            case Helper.GDI.BrushStyle.BS_HATCHED:\n                ret += \", color: \" + this.color.toString() + \", hatchstyle: \" + this.hatchstyle;\n                break;\n        }\n        return ret + \"}\";\n    }\n}\n\nexport class Pen extends Obj {\n    style: number;\n    width: PointS;\n    color: ColorRef;\n    linecap: number;\n    join: number;\n\n    constructor(reader: Blob, style?: number, width?: PointS, color?: ColorRef, linecap?: number, join?: number) {\n        super(\"pen\");\n        if (reader != null) {\n            style = reader.readUint16();\n            this.style = style & 0xFF;\n            this.width = new PointS(reader);\n            this.color = new ColorRef(reader);\n            this.linecap = (style & (Helper.GDI.PenStyle.PS_ENDCAP_SQUARE | Helper.GDI.PenStyle.PS_ENDCAP_FLAT));\n            this.join = (style & (Helper.GDI.PenStyle.PS_JOIN_BEVEL | Helper.GDI.PenStyle.PS_JOIN_MITER));\n        } else {\n            this.style = style;\n            this.width = width;\n            this.color = color;\n            this.linecap = linecap;\n            this.join = join;\n        }\n    }\n\n    clone() {\n        return new Pen(null, this.style, this.width.clone(), this.color.clone(), this.linecap, this.join);\n    }\n\n    toString() {\n        return \"{style: \" + this.style + \", width: \" + this.width.toString() + \", color: \" + this.color.toString() + \", linecap: \" + this.linecap + \", join: \" + this.join + \"}\";\n    }\n}\n\nexport class PaletteEntry {\n    flag: number;\n    b: number;\n    g: number;\n    r: number;\n\n    constructor(reader: Blob, copy?: PaletteEntry) {\n        if (reader != null) {\n            this.flag = reader.readUint8();\n            this.b = reader.readUint8();\n            this.g = reader.readUint8();\n            this.r = reader.readUint8();\n        } else {\n            this.flag = copy.flag;\n            this.b = copy.b;\n            this.g = copy.g;\n            this.r = copy.r;\n        }\n    }\n\n    clone() {\n        return new PaletteEntry(null, this);\n    }\n}\n\nexport class Palette extends Obj {\n    start: number;\n    entries: PaletteEntry[];\n\n    constructor(reader: Blob, copy?: Palette) {\n        super(\"palette\");\n        if (reader != null) {\n            this.start = reader.readUint16();\n            const cnt = reader.readUint16();\n            this.entries = [];\n            while (cnt > 0) {\n                this.entries.push(new PaletteEntry(reader));\n            }\n        } else {\n            this.start = copy.start;\n            this.entries = [];\n            const len = copy.entries.length;\n            for (let i = 0; i < len; i++) {\n                this.entries.push(copy.entries[i]);\n            }\n        }\n    }\n\n    clone() {\n        return new Palette(null, this);\n    }\n\n    toString() {\n        return \"{ #entries: \" + this.entries.length + \"}\"; // TODO\n    }\n}\n","/*\n\nThe MIT License (MIT)\n\nCopyright (c) 2015 Thomas Bluemel\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n\nimport { DIBitmap } from \"./Bitmap\";\nimport { Blob } from \"./Blob\";\nimport { Helper, WMFJSError } from \"./Helper\";\nimport { Obj, PointS, Rect } from \"./Primitives\";\nimport { CreateSimpleRegion, Region } from \"./Region\";\nimport { Brush, ColorRef, Font, Palette, Pen } from \"./Style\";\n\nexport interface ISelectedStyle {\n    brush?: Brush;\n    pen?: Pen;\n    font?: Font;\n    palette?: Palette;\n    region?: Region;\n    [key: string]: Obj;\n}\n\nexport class GDIContextState {\n    _svggroup: any;\n    _svgclipChanged: boolean;\n    _svgtextbkfilter: any;\n    mapmode: number;\n    stretchmode: number;\n    textalign: number;\n    bkmode: number;\n    textcolor: ColorRef;\n    bkcolor: ColorRef;\n    polyfillmode: number;\n    wx: number;\n    wy: number;\n    ww: number;\n    wh: number;\n    vx: number;\n    vy: number;\n    vw: number;\n    vh: number;\n    x: number;\n    y: number;\n    clip: Region;\n    ownclip: boolean;\n    selected: ISelectedStyle;\n\n    constructor(copy: GDIContextState, defObjects?: ISelectedStyle) {\n        if (copy != null) {\n            this._svggroup = copy._svggroup;\n            this._svgclipChanged = copy._svgclipChanged;\n            this._svgtextbkfilter = copy._svgtextbkfilter;\n            this.mapmode = copy.mapmode;\n            this.stretchmode = copy.stretchmode;\n            this.textalign = copy.textalign;\n            this.bkmode = copy.bkmode;\n            this.textcolor = copy.textcolor.clone();\n            this.bkcolor = copy.bkcolor.clone();\n            this.polyfillmode = copy.polyfillmode;\n            this.wx = copy.wx;\n            this.wy = copy.wy;\n            this.ww = copy.ww;\n            this.wh = copy.wh;\n            this.vx = copy.vx;\n            this.vy = copy.vy;\n            this.vw = copy.vw;\n            this.vh = copy.vh;\n            this.x = copy.x;\n            this.y = copy.y;\n\n            this.clip = copy.clip;\n            this.ownclip = false;\n\n            this.selected = {};\n            for (const type in copy.selected) {\n                this.selected[type] = copy.selected[type];\n            }\n        } else {\n            this._svggroup = null;\n            this._svgclipChanged = false;\n            this._svgtextbkfilter = null;\n            this.mapmode = Helper.GDI.MapMode.MM_ANISOTROPIC;\n            this.stretchmode = Helper.GDI.StretchMode.COLORONCOLOR;\n            this.textalign = 0; // TA_LEFT | TA_TOP | TA_NOUPDATECP\n            this.bkmode = Helper.GDI.MixMode.OPAQUE;\n            this.textcolor = new ColorRef(null, 0, 0, 0);\n            this.bkcolor = new ColorRef(null, 255, 255, 255);\n            this.polyfillmode = Helper.GDI.PolyFillMode.ALTERNATE;\n            this.wx = 0;\n            this.wy = 0;\n            this.ww = 0;\n            this.wh = 0;\n            this.vx = 0;\n            this.vy = 0;\n            this.vw = 0;\n            this.vh = 0;\n            this.x = 0;\n            this.y = 0;\n\n            this.clip = null;\n            this.ownclip = false;\n\n            this.selected = {};\n            for (const type in defObjects) {\n                const defObj = defObjects[type];\n                this.selected[type] = defObj != null ? defObj.clone() : null;\n            }\n        }\n    }\n}\n\nexport class GDIContext {\n    _svg: any;\n    _svgdefs: any;\n    _svgPatterns: {[key: string]: Brush};\n    _svgClipPaths: {[key: string]: Region};\n    defObjects: ISelectedStyle;\n    state: GDIContextState;\n    statestack: GDIContextState[];\n    objects: {[key: string]: Obj};\n\n    constructor(svg: any) {\n        this._svg = svg;\n        this._svgdefs = null;\n        this._svgPatterns = {};\n        this._svgClipPaths = {};\n\n        this.defObjects = {\n            brush: new Brush(null, null),\n            pen: new Pen(null, Helper.GDI.PenStyle.PS_SOLID, new PointS(null, 1, 1), new ColorRef(null, 0, 0, 0), 0, 0),\n            font: new Font(null, null),\n            palette: null,\n            region: null,\n        };\n\n        this.state = new GDIContextState(null, this.defObjects);\n        this.statestack = [this.state];\n        this.objects = {};\n    }\n\n    _pushGroup() {\n        if (this.state._svggroup == null || this.state._svgclipChanged) {\n            this.state._svgclipChanged = false;\n            this.state._svgtextbkfilter = null;\n\n            const settings: any = {\n                viewBox: [this.state.vx, this.state.vy, this.state.vw, this.state.vh].join(\" \"),\n                preserveAspectRatio: \"none\",\n            };\n            if (this.state.clip != null) {\n                Helper.log(\"[gdi] new svg x=\" + this.state.vx + \" y=\" + this.state.vy + \" width=\" + this.state.vw + \" height=\" + this.state.vh + \" with clipping\");\n                settings[\"clip-path\"] = \"url(#\" + this._getSvgClipPathForRegion(this.state.clip) + \")\";\n            } else {\n                Helper.log(\"[gdi] new svg x=\" + this.state.vx + \" y=\" + this.state.vy + \" width=\" + this.state.vw + \" height=\" + this.state.vh + \" without clipping\");\n            }\n            this.state._svggroup = this._svg.svg(this.state._svggroup,\n                this.state.vx, this.state.vy, this.state.vw, this.state.vh, settings);\n        }\n    }\n\n    _storeObject(obj: Obj) {\n        let i = 0;\n        while (this.objects[i.toString()] != null && i <= 65535) {\n            i++;\n        }\n        if (i > 65535) {\n            Helper.log(\"[gdi] Too many objects!\");\n            return -1;\n        }\n\n        this.objects[i.toString()] = obj;\n        return i;\n    }\n\n    _getObject(objIdx: number) {\n        const obj = this.objects[objIdx.toString()];\n        if (obj == null) {\n            Helper.log(\"[gdi] No object with handle \" + objIdx);\n        }\n        return obj;\n    }\n\n    _getSvgDef() {\n        if (this._svgdefs == null) {\n            this._svgdefs = this._svg.defs();\n        }\n        return this._svgdefs;\n    }\n\n    _getSvgClipPathForRegion(region: Region) {\n        for (const existingId in this._svgClipPaths) {\n            const rgn = this._svgClipPaths[existingId];\n            if (rgn == region) {\n                return existingId;\n            }\n        }\n\n        const id = Helper._makeUniqueId(\"c\");\n        const sclip = this._svg.clipPath(this._getSvgDef(), id, \"userSpaceOnUse\");\n        switch (region.complexity) {\n            case 1:\n                this._svg.rect(sclip, this._todevX(region.bounds.left), this._todevY(region.bounds.top),\n                    this._todevW(region.bounds.right - region.bounds.left), this._todevH(region.bounds.bottom - region.bounds.top),\n                    { fill: \"black\", strokeWidth: 0 });\n                break;\n            case 2:\n                for (let i = 0; i < region.scans.length; i++) {\n                    const scan = region.scans[i];\n                    for (let j = 0; j < scan.scanlines.length; j++) {\n                        const scanline = scan.scanlines[j];\n                        this._svg.rect(sclip, this._todevX(scanline.left), this._todevY(scan.top),\n                            this._todevW(scanline.right - scanline.left), this._todevH(scan.bottom - scan.top),\n                            { fill: \"black\", strokeWidth: 0 });\n                    }\n                }\n                break;\n        }\n        this._svgClipPaths[id] = region;\n        return id;\n    }\n\n    _getSvgPatternForBrush(brush: Brush) {\n        for (const existingId in this._svgPatterns) {\n            const pat = this._svgPatterns[existingId];\n            if (pat == brush) {\n                return existingId;\n            }\n        }\n\n        let width;\n        let height;\n        let img;\n        switch (brush.style) {\n            case Helper.GDI.BrushStyle.BS_PATTERN:\n                width = brush.pattern.getWidth();\n                height = brush.pattern.getHeight();\n                break;\n            case Helper.GDI.BrushStyle.BS_DIBPATTERNPT:\n                width = brush.dibpatternpt.getWidth();\n                height = brush.dibpatternpt.getHeight();\n                img = brush.dibpatternpt.base64ref();\n                break;\n            default:\n                throw new WMFJSError(\"Invalid brush style\");\n        }\n\n        const id = Helper._makeUniqueId(\"p\");\n        const spat = this._svg.pattern(this._getSvgDef(), id, 0, 0, width, height, {patternUnits: \"userSpaceOnUse\"});\n        this._svg.image(spat, 0, 0, width, height, img);\n        this._svgPatterns[id] = brush;\n        return id;\n    }\n\n    _selectObject(obj: Obj) {\n        this.state.selected[obj.type] = obj;\n        if (obj.type == \"region\") {\n            this.state._svgclipChanged = true;\n        }\n    }\n\n    _deleteObject(objIdx: number) {\n        const obj = this.objects[objIdx.toString()];\n        if (obj != null) {\n            for (let i = 0; i < this.statestack.length; i++) {\n                const state = this.statestack[i];\n                if (state.selected[obj.type] == obj) {\n                    state.selected[obj.type] = this.defObjects[obj.type].clone();\n                }\n            }\n            delete this.objects[objIdx.toString()];\n            return true;\n        }\n\n        Helper.log(\"[gdi] Cannot delete object with invalid handle \" + objIdx);\n        return false;\n    }\n\n    _getClipRgn() {\n        if (this.state.clip != null) {\n            if (!this.state.ownclip) {\n                this.state.clip = this.state.clip.clone();\n            }\n        } else {\n            if (this.state.selected.region != null) {\n                this.state.clip = this.state.selected.region.clone();\n            } else {\n                this.state.clip = CreateSimpleRegion(this.state.wx, this.state.wy, this.state.wx + this.state.ww, this.state.wy + this.state.wh);\n            }\n        }\n        this.state.ownclip = true;\n        return this.state.clip;\n    }\n\n    _todevX(val: number) {\n        // http://wvware.sourceforge.net/caolan/mapmode.html\n        // logical -> device\n        return Math.floor((val - this.state.wx) * (this.state.vw / this.state.ww)) + this.state.vx;\n    }\n\n    _todevY(val: number) {\n        // http://wvware.sourceforge.net/caolan/mapmode.html\n        // logical -> device\n        return Math.floor((val - this.state.wy) * (this.state.vh / this.state.wh)) + this.state.vy;\n    }\n\n    _todevW(val: number) {\n        // http://wvware.sourceforge.net/caolan/mapmode.html\n        // logical -> device\n        return Math.floor(val * (this.state.vw / this.state.ww)) + this.state.vx;\n    }\n\n    _todevH(val: number) {\n        // http://wvware.sourceforge.net/caolan/mapmode.html\n        // logical -> device\n        return Math.floor(val * (this.state.vh / this.state.wh)) + this.state.vy;\n    }\n\n    _tologicalX(val: number) {\n        // http://wvware.sourceforge.net/caolan/mapmode.html\n        // logical -> device\n        return Math.floor((val - this.state.vx) / (this.state.vw / this.state.ww)) + this.state.wx;\n    }\n\n    _tologicalY(val: number) {\n        // http://wvware.sourceforge.net/caolan/mapmode.html\n        // logical -> device\n        return Math.floor((val - this.state.vy) / (this.state.vh / this.state.wh)) + this.state.wy;\n    }\n\n    _tologicalW(val: number) {\n        // http://wvware.sourceforge.net/caolan/mapmode.html\n        // logical -> device\n        return Math.floor(val / (this.state.vw / this.state.ww)) + this.state.wx;\n    }\n\n    _tologicalH(val: number) {\n        // http://wvware.sourceforge.net/caolan/mapmode.html\n        // logical -> device\n        return Math.floor(val / (this.state.vh / this.state.wh)) + this.state.wy;\n    }\n\n    setMapMode(mode: number) {\n        Helper.log(\"[gdi] setMapMode: mode=\" + mode);\n        this.state.mapmode = mode;\n        this.state._svggroup = null;\n    }\n\n    setWindowOrg(x: number, y: number) {\n        Helper.log(\"[gdi] setWindowOrg: x=\" + x + \" y=\" + y);\n        this.state.wx = x;\n        this.state.wy = y;\n        this.state._svggroup = null;\n    }\n\n    setWindowExt(x: number, y: number) {\n        Helper.log(\"[gdi] setWindowExt: x=\" + x + \" y=\" + y);\n        this.state.ww = x;\n        this.state.wh = y;\n        this.state._svggroup = null;\n    }\n\n    offsetWindowOrg(offX: number, offY: number) {\n        Helper.log(\"[gdi] offsetWindowOrg: offX=\" + offX + \" offY=\" + offY);\n        this.state.wx += offX;\n        this.state.wy += offY;\n        this.state._svggroup = null;\n    }\n\n    setViewportOrg(x: number, y: number) {\n        Helper.log(\"[gdi] setViewportOrg: x=\" + x + \" y=\" + y);\n        this.state.vx = x;\n        this.state.vy = y;\n        this.state._svggroup = null;\n    }\n\n    setViewportExt(x: number, y: number) {\n        Helper.log(\"[gdi] setViewportExt: x=\" + x + \" y=\" + y);\n        this.state.vw = x;\n        this.state.vh = y;\n        this.state._svggroup = null;\n    }\n\n    offsetViewportOrg(offX: number, offY: number) {\n        Helper.log(\"[gdi] offsetViewportOrg: offX=\" + offX + \" offY=\" + offY);\n        this.state.vx += offX;\n        this.state.vy += offY;\n        this.state._svggroup = null;\n    }\n\n    saveDC() {\n        Helper.log(\"[gdi] saveDC\");\n        const prevstate = this.state;\n        this.state = new GDIContextState(this.state);\n        this.statestack.push(prevstate);\n        this.state._svggroup = null;\n    }\n\n    restoreDC(saved: number) {\n        Helper.log(\"[gdi] restoreDC: saved=\" + saved);\n        if (this.statestack.length > 1) {\n            if (saved == -1) {\n                this.state = this.statestack.pop();\n            } else if (saved < -1) {\n                throw new WMFJSError(\"restoreDC: relative restore not implemented\");\n            } else if (saved > 1) {\n                throw new WMFJSError(\"restoreDC: absolute restore not implemented\");\n            }\n        } else {\n            throw new WMFJSError(\"No saved contexts\");\n        }\n\n        this.state._svggroup = null;\n    }\n\n    escape(func: number, blob: Blob, offset: number, count: number) {\n        Helper.log(\"[gdi] escape: func=\" + func + \" offset=\" + offset + \" count=\" + count);\n    }\n\n    setStretchBltMode(stretchMode: number) {\n        Helper.log(\"[gdi] setStretchBltMode: stretchMode=\" + stretchMode);\n    }\n\n    stretchDib(srcX: number, srcY: number, srcW: number, srcH: number, dstX: number, dstY: number, dstW: number, dstH: number, rasterOp: number, colorUsage: number, dib: DIBitmap) {\n        Helper.log(\"[gdi] stretchDib: srcX=\" + srcX + \" srcY=\" + srcY + \" srcW=\" + srcW + \" srcH=\" + srcH + \" dstX=\" + dstX + \" dstY=\" + dstY + \" dstW=\" + dstW + \" dstH=\" + dstH + \" rasterOp=0x\" + rasterOp.toString(16));\n        srcX = this._todevX(srcX);\n        srcY = this._todevY(srcY);\n        srcW = this._todevW(srcW);\n        srcH = this._todevH(srcH);\n        dstX = this._todevX(dstX);\n        dstY = this._todevY(dstY);\n        dstW = this._todevW(dstW);\n        dstH = this._todevH(dstH);\n        Helper.log(\"[gdi] stretchDib: TRANSLATED: srcX=\" + srcX + \" srcY=\" + srcY + \" srcW=\" + srcW + \" srcH=\" + srcH + \" dstX=\" + dstX + \" dstY=\" + dstY + \" dstW=\" + dstW + \" dstH=\" + dstH + \" rasterOp=0x\" + rasterOp.toString(16) + \" colorUsage=0x\" + colorUsage.toString(16));\n        this._pushGroup();\n        this._svg.image(this.state._svggroup, dstX, dstY, dstW, dstH, dib.base64ref());\n    }\n\n    stretchDibBits(srcX: number, srcY: number, srcW: number, srcH: number, dstX: number, dstY: number, dstW: number, dstH: number, rasterOp: number, dib: DIBitmap) {\n        Helper.log(\"[gdi] stretchDibBits: srcX=\" + srcX + \" srcY=\" + srcY + \" srcW=\" + srcW + \" srcH=\" + srcH + \" dstX=\" + dstX + \" dstY=\" + dstY + \" dstW=\" + dstW + \" dstH=\" + dstH + \" rasterOp=0x\" + rasterOp.toString(16));\n        srcX = this._todevX(srcX);\n        srcY = this._todevY(srcY);\n        srcW = this._todevW(srcW);\n        srcH = this._todevH(srcH);\n        dstX = this._todevX(dstX);\n        dstY = this._todevY(dstY);\n        dstW = this._todevW(dstW);\n        dstH = this._todevH(dstH);\n        Helper.log(\"[gdi] stretchDibBits: TRANSLATED: srcX=\" + srcX + \" srcY=\" + srcY + \" srcW=\" + srcW + \" srcH=\" + srcH + \" dstX=\" + dstX + \" dstY=\" + dstY + \" dstW=\" + dstW + \" dstH=\" + dstH + \" rasterOp=0x\" + rasterOp.toString(16));\n        this._pushGroup();\n        this._svg.image(this.state._svggroup, dstX, dstY, dstW, dstH, dib.base64ref());\n    }\n\n    _applyOpts(opts: any, usePen: boolean, useBrush: boolean, useFont: boolean) {\n        if (opts == null) {\n            opts = {};\n        }\n        if (usePen) {\n            const pen = this.state.selected.pen;\n            if (pen.style != Helper.GDI.PenStyle.PS_NULL) {\n                opts.stroke =  \"#\" + pen.color.toHex(), // TODO: pen style\n                    opts.strokeWidth = this._todevW(pen.width.x); // TODO: is .y ever used?\n\n                let dotWidth;\n                if ((pen.linecap & Helper.GDI.PenStyle.PS_ENDCAP_SQUARE) != 0) {\n                    opts[\"stroke-linecap\"] = \"square\";\n                    dotWidth = 1;\n                } else if ((pen.linecap & Helper.GDI.PenStyle.PS_ENDCAP_FLAT) != 0) {\n                    opts[\"stroke-linecap\"] = \"butt\";\n                    dotWidth = opts.strokeWidth;\n                } else {\n                    opts[\"stroke-linecap\"] = \"round\";\n                    dotWidth = 1;\n                }\n\n                if ((pen.join & Helper.GDI.PenStyle.PS_JOIN_BEVEL) != 0) {\n                    opts[\"stroke-linejoin\"] = \"bevel\";\n                } else if ((pen.join & Helper.GDI.PenStyle.PS_JOIN_MITER) != 0) {\n                    opts[\"stroke-linejoin\"] = \"miter\";\n                     } else {\n                    opts[\"stroke-linejoin\"] = \"round\";\n                     }\n\n                const dashWidth = opts.strokeWidth * 4;\n                const dotSpacing = opts.strokeWidth * 2;\n                switch (pen.style) {\n                    case Helper.GDI.PenStyle.PS_DASH:\n                        opts[\"stroke-dasharray\"] = [dashWidth, dotSpacing].toString();\n                        break;\n                    case Helper.GDI.PenStyle.PS_DOT:\n                        opts[\"stroke-dasharray\"] = [dotWidth, dotSpacing].toString();\n                        break;\n                    case Helper.GDI.PenStyle.PS_DASHDOT:\n                        opts[\"stroke-dasharray\"] = [dashWidth, dotSpacing, dotWidth, dotSpacing].toString();\n                        break;\n                    case Helper.GDI.PenStyle.PS_DASHDOTDOT:\n                        opts[\"stroke-dasharray\"] = [dashWidth, dotSpacing, dotWidth, dotSpacing, dotWidth, dotSpacing].toString();\n                        break;\n                }\n            }\n        }\n        if (useBrush) {\n            const brush = this.state.selected.brush;\n            switch (brush.style) {\n                case Helper.GDI.BrushStyle.BS_SOLID:\n                    opts.fill = \"#\" + brush.color.toHex();\n                    break;\n                case Helper.GDI.BrushStyle.BS_PATTERN:\n                case Helper.GDI.BrushStyle.BS_DIBPATTERNPT:\n                    opts.fill = \"url(#\" + this._getSvgPatternForBrush(brush) + \")\";\n                    break;\n                case Helper.GDI.BrushStyle.BS_NULL:\n                    opts.fill = \"none\";\n                    break;\n                default:\n                    Helper.log(\"[gdi] unsupported brush style: \" + brush.style);\n                    opts.fill = \"none\";\n                    break;\n            }\n        }\n        if (useFont) {\n            const font = this.state.selected.font;\n            opts[\"font-family\"] = font.facename;\n            opts[\"font-size\"] = this._todevH(Math.abs(font.height));\n            opts.fill = \"#\" + this.state.textcolor.toHex();\n        }\n        return opts;\n    }\n\n    rectangle(rect: Rect, rw: number, rh: number) {\n        Helper.log(\"[gdi] rectangle: rect=\" + rect.toString() + \" with pen \" + this.state.selected.pen.toString() + \" and brush \" + this.state.selected.brush.toString());\n        const bottom = this._todevY(rect.bottom);\n        const right = this._todevX(rect.right);\n        const top = this._todevY(rect.top);\n        const left = this._todevX(rect.left);\n        rw = this._todevH(rw);\n        rh = this._todevH(rh);\n        Helper.log(\"[gdi] rectangle: TRANSLATED: bottom=\" + bottom + \" right=\" + right + \" top=\" + top + \" left=\" + left + \" rh=\" + rh + \" rw=\" + rw);\n        this._pushGroup();\n\n        const opts = this._applyOpts(null, true, true, false);\n        this._svg.rect(this.state._svggroup, left, top, right - left, bottom - top, rw / 2, rh / 2, opts);\n    }\n\n    textOut(x: number, y: number, text: string) {\n        Helper.log(\"[gdi] textOut: x=\" + x + \" y=\" + y + \" text=\" + text + \" with font \" + this.state.selected.font.toString());\n        x = this._todevX(x);\n        y = this._todevY(y);\n        Helper.log(\"[gdi] textOut: TRANSLATED: x=\" + x + \" y=\" + y);\n        this._pushGroup();\n\n        const opts = this._applyOpts(null, false, false, true);\n        if (this.state.selected.font.escapement != 0) {\n            opts.transform = \"rotate(\" + [(-this.state.selected.font.escapement / 10), x, y] + \")\";\n            opts.style = \"dominant-baseline: middle; text-anchor: start;\";\n        }\n        if (this.state.bkmode == Helper.GDI.MixMode.OPAQUE) {\n            if (this.state._svgtextbkfilter == null) {\n                const filterId = Helper._makeUniqueId(\"f\");\n                const filter = this._svg.filter(this._getSvgDef(), filterId, 0, 0, 1, 1);\n                this._svg.filters.flood(filter, null, \"#\" + this.state.bkcolor.toHex(), 1.0);\n                this._svg.filters.composite(filter, null, null, \"SourceGraphic\");\n                this.state._svgtextbkfilter = filter;\n            }\n\n            opts.filter = \"url(#\" + $(this.state._svgtextbkfilter).attr(\"id\") + \")\";\n        }\n        this._svg.text(this.state._svggroup, x, y, text, opts);\n    }\n\n    extTextOut(x: number, y: number, text: string, fwOpts: number, rect: Rect, dx: number[]) {\n        Helper.log(\"[gdi] extTextOut: x=\" + x + \" y=\" + y + \" text=\" + text + \" with font \" + this.state.selected.font.toString());\n        x = this._todevX(x);\n        y = this._todevY(y);\n        Helper.log(\"[gdi] extTextOut: TRANSLATED: x=\" + x + \" y=\" + y);\n        this._pushGroup();\n\n        const opts = this._applyOpts(null, false, false, true);\n        if (this.state.selected.font.escapement != 0) {\n            opts.transform = \"rotate(\" + [(-this.state.selected.font.escapement / 10), x, y] + \")\";\n            opts.style = \"dominant-baseline: middle; text-anchor: start;\";\n        }\n        if (this.state.bkmode == Helper.GDI.MixMode.OPAQUE) {\n            if (this.state._svgtextbkfilter == null) {\n                const filterId = Helper._makeUniqueId(\"f\");\n                const filter = this._svg.filter(this._getSvgDef(), filterId, 0, 0, 1, 1);\n                this._svg.filters.flood(filter, null, \"#\" + this.state.bkcolor.toHex(), 1.0);\n                this._svg.filters.composite(filter, null, null, \"SourceGraphic\");\n                this.state._svgtextbkfilter = filter;\n            }\n\n            opts.filter = \"url(#\" + $(this.state._svgtextbkfilter).attr(\"id\") + \")\";\n        }\n        this._svg.text(this.state._svggroup, x, y, text, opts);\n    }\n\n    lineTo(x: number, y: number) {\n        Helper.log(\"[gdi] lineTo: x=\" + x + \" y=\" + y + \" with pen \" + this.state.selected.pen.toString());\n        const toX = this._todevX(x);\n        const toY = this._todevY(y);\n        const fromX = this._todevX(this.state.x);\n        const fromY = this._todevY(this.state.y);\n\n        // Update position\n        this.state.x = x;\n        this.state.y = y;\n\n        Helper.log(\"[gdi] lineTo: TRANSLATED: toX=\" + toX + \" toY=\" + toY + \" fromX=\" + fromX + \" fromY=\" + fromY);\n        this._pushGroup();\n\n        const opts = this._applyOpts(null, true, false, false);\n        this._svg.line(this.state._svggroup, fromX, fromY, toX, toY, opts);\n    }\n\n    moveTo(x: number, y: number) {\n        Helper.log(\"[gdi] moveTo: x=\" + x + \" y=\" + y);\n        this.state.x = x;\n        this.state.y = y;\n    }\n\n    polygon(points: PointS[], first: boolean) {\n        Helper.log(\"[gdi] polygon: points=\" + points + \" with pen \" + this.state.selected.pen.toString() + \" and brush \" + this.state.selected.brush.toString());\n        const pts = [];\n        for (let i = 0; i < points.length; i++) {\n            const point = points[i];\n            pts.push([this._todevX(point.x), this._todevY(point.y)]);\n        }\n        Helper.log(\"[gdi] polygon: TRANSLATED: pts=\" + pts);\n        if (first) {\n            this._pushGroup();\n        }\n        const opts = {\n            \"fill-rule\": this.state.polyfillmode == Helper.GDI.PolyFillMode.ALTERNATE ? \"evenodd\" : \"nonzero\",\n        };\n        this._applyOpts(opts, true, true, false);\n        this._svg.polygon(this.state._svggroup, pts, opts);\n    }\n\n    polyPolygon(polygons: PointS[][]) {\n        Helper.log(\"[gdi] polyPolygon: polygons.length=\" + polygons.length + \" with pen \" + this.state.selected.pen.toString() + \" and brush \" + this.state.selected.brush.toString());\n\n        const cnt = polygons.length;\n        for (let i = 0; i < cnt; i++) {\n            this.polygon(polygons[i], i == 0);\n        }\n    }\n\n    polyline(points: PointS[]) {\n        Helper.log(\"[gdi] polyline: points=\" + points + \" with pen \" + this.state.selected.pen.toString());\n        const pts = [];\n        for (let i = 0; i < points.length; i++) {\n            const point = points[i];\n            pts.push([this._todevX(point.x), this._todevY(point.y)]);\n        }\n        Helper.log(\"[gdi] polyline: TRANSLATED: pts=\" + pts);\n        this._pushGroup();\n        const opts = this._applyOpts({fill: \"none\"}, true, false, false);\n        this._svg.polyline(this.state._svggroup, pts, opts);\n    }\n\n    ellipse(rect: Rect) {\n        Helper.log(\"[gdi] ellipse: rect=\" + rect.toString() + \" with pen \" + this.state.selected.pen.toString() + \" and brush \" + this.state.selected.brush.toString());\n        const bottom = this._todevY(rect.bottom);\n        const right = this._todevX(rect.right);\n        const top = this._todevY(rect.top);\n        const left = this._todevX(rect.left);\n        Helper.log(\"[gdi] ellipse: TRANSLATED: bottom=\" + bottom + \" right=\" + right + \" top=\" + top + \" left=\" + left);\n        this._pushGroup();\n        const width2 = (right - left) / 2;\n        const height2 = (bottom - top) / 2;\n        const opts = this._applyOpts(null, true, true, false);\n        this._svg.ellipse(this.state._svggroup, left + width2, top + height2, width2, height2, opts);\n    }\n\n    excludeClipRect(rect: Rect) {\n        Helper.log(\"[gdi] excludeClipRect: rect=\" + rect.toString());\n        this._getClipRgn().subtract(rect);\n    }\n\n    intersectClipRect(rect: Rect) {\n        Helper.log(\"[gdi] intersectClipRect: rect=\" + rect.toString());\n        this._getClipRgn().intersect(rect);\n    }\n\n    offsetClipRgn(offX: number, offY: number) {\n        Helper.log(\"[gdi] offsetClipRgn: offX=\" + offX + \" offY=\" + offY);\n        this._getClipRgn().offset(offX, offY);\n    }\n\n    setTextAlign(textAlignmentMode: number) {\n        Helper.log(\"[gdi] setTextAlign: textAlignmentMode=0x\" + textAlignmentMode.toString(16));\n        this.state.textalign = textAlignmentMode;\n    }\n\n    setBkMode(bkMode: number) {\n        Helper.log(\"[gdi] setBkMode: bkMode=0x\" + bkMode.toString(16));\n        this.state.bkmode = bkMode;\n    }\n\n    setTextColor(textColor: ColorRef) {\n        Helper.log(\"[gdi] setTextColor: textColor=\" + textColor.toString());\n        this.state.textcolor = textColor;\n    }\n\n    setBkColor(bkColor: ColorRef) {\n        Helper.log(\"[gdi] setBkColor: bkColor=\" + bkColor.toString());\n        this.state.bkcolor = bkColor;\n        this.state._svgtextbkfilter = null;\n    }\n\n    setPolyFillMode(polyFillMode: number) {\n        Helper.log(\"[gdi] setPolyFillMode: polyFillMode=\" + polyFillMode);\n        this.state.polyfillmode = polyFillMode;\n    }\n\n    createBrush(brush: Brush) {\n        const idx = this._storeObject(brush);\n        Helper.log(\"[gdi] createBrush: brush=\" + brush.toString() + \" with handle \" + idx);\n    }\n\n    createFont(font: Font) {\n        const idx = this._storeObject(font);\n        Helper.log(\"[gdi] createFont: font=\" + font.toString() + \" with handle \" + idx);\n    }\n\n    createPen(pen: Pen) {\n        const idx = this._storeObject(pen);\n        Helper.log(\"[gdi] createPen: pen=\" + pen.toString() + \" width handle \" + idx);\n    }\n\n    createPalette(palette: Palette) {\n        const idx = this._storeObject(palette);\n        Helper.log(\"[gdi] createPalette: palette=\" + palette.toString() + \" width handle \" + idx);\n    }\n\n    createRegion(region: Region) {\n        const idx = this._storeObject(region);\n        Helper.log(\"[gdi] createRegion: region=\" + region.toString() + \" width handle \" + idx);\n    }\n\n    createPatternBrush(patternBrush: Brush) {\n        const idx = this._storeObject(patternBrush);\n        Helper.log(\"[gdi] createRegion: region=\" + patternBrush.toString() + \" width handle \" + idx);\n    }\n\n    selectObject(objIdx: number, checkType: string) {\n        const obj = this._getObject(objIdx);\n        if (obj != null && (checkType == null || obj.type == checkType)) {\n            this._selectObject(obj);\n            Helper.log(\"[gdi] selectObject: objIdx=\" + objIdx + (obj ? \" selected \" + obj.type + \": \" + obj.toString() : \"[invalid index]\"));\n        } else {\n            Helper.log(\"[gdi] selectObject: objIdx=\" + objIdx + (obj ? \" invalid object type: \" + obj.type : \"[invalid index]\"));\n        }\n    }\n\n    deleteObject(objIdx: number) {\n        const ret = this._deleteObject(objIdx);\n        Helper.log(\"[gdi] deleteObject: objIdx=\" + objIdx + (ret ? \" deleted object\" : \"[invalid index]\"));\n    }\n}\n","/*\n\nThe MIT License (MIT)\n\nCopyright (c) 2015 Thomas Bluemel\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n\nimport { DIBitmap, PatternBitmap16 } from \"./Bitmap\";\nimport { Blob } from \"./Blob\";\nimport { GDIContext } from \"./GDIContext\";\nimport { Helper, WMFJSError } from \"./Helper\";\nimport { PointS, Rect } from \"./Primitives\";\nimport { Region } from \"./Region\";\nimport { Brush, ColorRef, Font, Palette, Pen } from \"./Style\";\n\nexport class WMFRecords {\n    _records: Array<(gdi: GDIContext) => void>;\n\n    constructor(reader: Blob, first: number) {\n        this._records = [];\n\n        let all = false;\n        let curpos = first;\n        main_loop: while (!all) {\n            reader.seek(curpos);\n            const size = reader.readUint32();\n            if (size < 3) {\n                throw new WMFJSError(\"Invalid record size\");\n            }\n            const type = reader.readUint16();\n            switch (type) {\n                case Helper.GDI.RecordType.META_EOF:\n                    all = true;\n                    break main_loop;\n                case Helper.GDI.RecordType.META_SETMAPMODE: {\n                    const mapMode = reader.readUint16();\n                    this._records.push((gdi) => {\n                        gdi.setMapMode(mapMode);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SETWINDOWORG: {\n                    const y = reader.readInt16();\n                    const x = reader.readInt16();\n                    this._records.push((gdi) => {\n                        gdi.setWindowOrg(x, y);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SETWINDOWEXT: {\n                    const y = reader.readInt16();\n                    const x = reader.readInt16();\n                    this._records.push((gdi) => {\n                        gdi.setWindowExt(x, y);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_OFFSETWINDOWORG: {\n                    const offY = reader.readInt16();\n                    const offX = reader.readInt16();\n                    this._records.push((gdi) => {\n                        gdi.offsetWindowOrg(offX, offY);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SETVIEWPORTORG: {\n                    const y = reader.readInt16();\n                    const x = reader.readInt16();\n                    this._records.push((gdi) => {\n                        gdi.setViewportOrg(x, y);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SETVIEWPORTEXT: {\n                    const y = reader.readInt16();\n                    const x = reader.readInt16();\n                    this._records.push((gdi) => {\n                        gdi.setViewportExt(x, y);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_OFFSETVIEWPORTORG: {\n                    const offY = reader.readInt16();\n                    const offX = reader.readInt16();\n                    this._records.push((gdi) => {\n                        gdi.offsetViewportOrg(offX, offY);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SAVEDC: {\n                    this._records.push((gdi) => {\n                        gdi.saveDC();\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_RESTOREDC: {\n                    const saved = reader.readInt16();\n                    this._records.push((gdi) => {\n                        gdi.restoreDC(saved);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SETSTRETCHBLTMODE: {\n                    const stretchMode = reader.readUint16();\n                    this._records.push((gdi) => {\n                        gdi.setStretchBltMode(stretchMode);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_DIBSTRETCHBLT: {\n                    const haveSrcDib = ((type >> 8) + 3 != size);\n                    const rasterOp = reader.readUint16() | (reader.readUint16() << 16);\n                    const srcH = reader.readInt16();\n                    const srcW = reader.readInt16();\n                    const srcY = reader.readInt16();\n                    const srcX = reader.readInt16();\n                    const destH = reader.readInt16();\n                    const destW = reader.readInt16();\n                    const destY = reader.readInt16();\n                    const destX = reader.readInt16();\n                    const datalength = size * 2 - (reader.pos - curpos);\n                    const dib = new DIBitmap(reader, datalength);\n                    this._records.push((gdi) => {\n                        gdi.stretchDibBits(srcX, srcY, srcW, srcH, destX, destY, destW, destH, rasterOp, dib);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_STRETCHDIB: {\n                    const rasterOp = reader.readUint16() | (reader.readUint16() << 16);\n                    const colorUsage = reader.readInt16();\n                    const srcH = reader.readInt16();\n                    const srcW = reader.readInt16();\n                    const srcY = reader.readInt16();\n                    const srcX = reader.readInt16();\n                    const destH = reader.readInt16();\n                    const destW = reader.readInt16();\n                    const destY = reader.readInt16();\n                    const destX = reader.readInt16();\n                    const datalength = size * 2 - (reader.pos - curpos);\n                    const dib = new DIBitmap(reader, datalength);\n                    this._records.push((gdi) => {\n                        gdi.stretchDib(srcX, srcY, srcW, srcH, destX, destY, destW, destH, rasterOp, colorUsage, dib);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_ESCAPE: {\n                    const func = reader.readUint16();\n                    const count = reader.readUint16();\n                    const offset = reader.pos;\n                    const blob = new Blob(reader, offset);\n                    this._records.push((gdi) => {\n                        gdi.escape(func, blob, offset, count);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SETTEXTALIGN: {\n                    const textAlign = reader.readUint16();\n                    this._records.push((gdi) => {\n                        gdi.setTextAlign(textAlign);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SETBKMODE: {\n                    const bkMode = reader.readUint16();\n                    this._records.push((gdi) => {\n                        gdi.setBkMode(bkMode);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SETTEXTCOLOR: {\n                    const textColor = new ColorRef(reader);\n                    this._records.push((gdi) => {\n                        gdi.setTextColor(textColor);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SETBKCOLOR: {\n                    const bkColor = new ColorRef(reader);\n                    this._records.push((gdi) => {\n                        gdi.setBkColor(bkColor);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_CREATEBRUSHINDIRECT: {\n                    const datalength = size * 2 - (reader.pos - curpos);\n                    const brush = new Brush(reader, datalength, false);\n                    this._records.push((gdi) => {\n                        gdi.createBrush(brush);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_DIBCREATEPATTERNBRUSH: {\n                    const datalength = size * 2 - (reader.pos - curpos);\n                    const brush = new Brush(reader, datalength, true);\n                    this._records.push((gdi) => {\n                        gdi.createBrush(brush);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_CREATEPENINDIRECT: {\n                    const pen = new Pen(reader);\n                    this._records.push((gdi) => {\n                        gdi.createPen(pen);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_CREATEFONTINDIRECT: {\n                    const datalength = size * 2 - (reader.pos - curpos);\n                    const font = new Font(reader, datalength);\n                    this._records.push((gdi) => {\n                        gdi.createFont(font);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SELECTOBJECT: {\n                    const idx = reader.readUint16();\n                    this._records.push((gdi) => {\n                        gdi.selectObject(idx, null);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SELECTPALETTE: {\n                    const idx = reader.readUint16();\n                    this._records.push((gdi) => {\n                        gdi.selectObject(idx, \"palette\");\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SELECTCLIPREGION: {\n                    const idx = reader.readUint16();\n                    this._records.push((gdi) => {\n                        gdi.selectObject(idx, \"region\");\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_DELETEOBJECT: {\n                    const idx = reader.readUint16();\n                    this._records.push((gdi) => {\n                        gdi.deleteObject(idx);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_RECTANGLE: {\n                    const rect = new Rect(reader);\n                    this._records.push((gdi) => {\n                        gdi.rectangle(rect, 0, 0);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_ROUNDRECT: {\n                    const rh = reader.readInt16();\n                    const rw = reader.readInt16();\n                    const rect = new Rect(reader);\n                    this._records.push((gdi) => {\n                        gdi.rectangle(rect, rw, rh);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_LINETO: {\n                    const y = reader.readInt16();\n                    const x = reader.readInt16();\n                    this._records.push((gdi) => {\n                        gdi.lineTo(x, y);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_MOVETO: {\n                    const y = reader.readInt16();\n                    const x = reader.readInt16();\n                    this._records.push((gdi) => {\n                        gdi.moveTo(x, y);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_TEXTOUT: {\n                    const len = reader.readInt16();\n                    if (len > 0) {\n                        const text = reader.readString(len);\n                        reader.skip(len % 2);\n                        const y = reader.readInt16();\n                        const x = reader.readInt16();\n                        this._records.push((gdi) => {\n                            gdi.textOut(x, y, text);\n                        });\n                    }\n                    break;\n                }\n                case Helper.GDI.RecordType.META_EXTTEXTOUT: {\n                    const y = reader.readInt16();\n                    const x = reader.readInt16();\n                    const len = reader.readInt16();\n                    const fwOpts = reader.readUint16();\n\n                    let hasRect = null;\n                    let hasDx = null;\n                    if (size * 2 === 14 + len + len % 2) {\n                        hasRect = false;\n                        hasDx = false;\n                    }\n                    if (size * 2 === 14 + 8 + len + len % 2) {\n                        hasRect = true;\n                        hasDx = false;\n                    }\n                    if (size * 2 === 14 + len + len % 2 + len * 2) {\n                        hasRect = false;\n                        hasDx = true;\n                    }\n                    if (size * 2 === 14 + 8 + len + len % 2 + len * 2) {\n                        hasRect = true;\n                        hasDx = true;\n                    }\n\n                    const rect = hasRect ? new Rect(reader) : null;\n                    if (len > 0) {\n                        const text = reader.readString(len);\n                        reader.skip(len % 2);\n\n                        const dx: number[] = [];\n                        if (hasDx) {\n                            for (let i = 0; i < text.length; i++) {\n                                dx.push(reader.readInt16());\n                            }\n                        }\n\n                        this._records.push((gdi) => {\n                            gdi.extTextOut(x, y, text, fwOpts, rect, dx);\n                        });\n                    }\n                    break;\n                }\n                case Helper.GDI.RecordType.META_EXCLUDECLIPRECT: {\n                    const rect = new Rect(reader);\n                    this._records.push((gdi) => {\n                        gdi.excludeClipRect(rect);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_INTERSECTCLIPRECT: {\n                    const rect = new Rect(reader);\n                    this._records.push((gdi) => {\n                        gdi.intersectClipRect(rect);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_POLYGON: {\n                    let cnt = reader.readInt16();\n                    const points: PointS[] = [];\n                    while (cnt > 0) {\n                        points.push(new PointS(reader));\n                        cnt--;\n                    }\n                    this._records.push((gdi) => {\n                        gdi.polygon(points, true);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_SETPOLYFILLMODE: {\n                    const polyfillmode = reader.readUint16();\n                    this._records.push((gdi) => {\n                        gdi.setPolyFillMode(polyfillmode);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_POLYPOLYGON: {\n                    const cnt = reader.readUint16();\n                    const polygonsPtCnts = [];\n                    for (let i = 0; i < cnt; i++) {\n                        polygonsPtCnts.push(reader.readUint16());\n                    }\n\n                    const polygons: PointS[][] = [];\n                    for (let i = 0; i < cnt; i++) {\n                        const ptCnt = polygonsPtCnts[i];\n\n                        const p = [];\n                        for (let ip = 0; ip < ptCnt; ip++) {\n                            p.push(new PointS(reader));\n                        }\n                        polygons.push(p);\n                    }\n                    this._records.push((gdi) => {\n                        gdi.polyPolygon(polygons);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_POLYLINE: {\n                    let cnt = reader.readInt16();\n                    const points: PointS[] = [];\n                    while (cnt > 0) {\n                        points.push(new PointS(reader));\n                        cnt--;\n                    }\n                    this._records.push((gdi) => {\n                        gdi.polyline(points);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_ELLIPSE: {\n                    const rect = new Rect(reader);\n                    this._records.push((gdi) => {\n                        gdi.ellipse(rect);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_CREATEPALETTE: {\n                    const palette = new Palette(reader);\n                    this._records.push((gdi) => {\n                        gdi.createPalette(palette);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_CREATEREGION: {\n                    const region = new Region(reader);\n                    this._records.push((gdi) => {\n                        gdi.createRegion(region);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_CREATEPATTERNBRUSH: {\n                    const datalength = size * 2 - (reader.pos - curpos);\n                    const patternBitmap = new PatternBitmap16(reader, datalength);\n                    const brush = new Brush(reader, datalength, patternBitmap);\n                    this._records.push((gdi) => {\n                        gdi.createPatternBrush(brush);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_OFFSETCLIPRGN: {\n                    const offY = reader.readInt16();\n                    const offX = reader.readInt16();\n                    this._records.push((gdi) => {\n                        gdi.offsetClipRgn(offX, offY);\n                    });\n                    break;\n                }\n                case Helper.GDI.RecordType.META_REALIZEPALETTE:\n                case Helper.GDI.RecordType.META_SETPALENTRIES:\n                case Helper.GDI.RecordType.META_SETROP2:\n                case Helper.GDI.RecordType.META_SETRELABS:\n                case Helper.GDI.RecordType.META_SETTEXTCHAREXTRA:\n                case Helper.GDI.RecordType.META_RESIZEPALETTE:\n                case Helper.GDI.RecordType.META_SETLAYOUT:\n                case Helper.GDI.RecordType.META_FILLREGION:\n                case Helper.GDI.RecordType.META_SETMAPPERFLAGS:\n                case Helper.GDI.RecordType.META_SETTEXTJUSTIFICATION:\n                case Helper.GDI.RecordType.META_SCALEWINDOWEXT:\n                case Helper.GDI.RecordType.META_SCALEVIEWPORTEXT:\n                case Helper.GDI.RecordType.META_FLOODFILL:\n                case Helper.GDI.RecordType.META_FRAMEREGION:\n                case Helper.GDI.RecordType.META_ANIMATEPALETTE:\n                case Helper.GDI.RecordType.META_EXTFLOODFILL:\n                case Helper.GDI.RecordType.META_SETPIXEL:\n                case Helper.GDI.RecordType.META_PATBLT:\n                case Helper.GDI.RecordType.META_PIE:\n                case Helper.GDI.RecordType.META_STRETCHBLT:\n                case Helper.GDI.RecordType.META_INVERTREGION:\n                case Helper.GDI.RecordType.META_PAINTREGION:\n                case Helper.GDI.RecordType.META_ARC:\n                case Helper.GDI.RecordType.META_CHORD:\n                case Helper.GDI.RecordType.META_BITBLT:\n                case Helper.GDI.RecordType.META_SETDIBTODEV:\n                case Helper.GDI.RecordType.META_DIBBITBLT:\n                default: {\n                    let recordName = \"UNKNOWN\";\n                    for (const name in Helper.GDI.RecordType) {\n                        const recordTypes: any = Helper.GDI.RecordType;\n                        if (recordTypes[name] == type) {\n                            recordName = name;\n                            break;\n                        }\n                    }\n                    Helper.log(\"[WMF] \" + recordName + \" record (0x\" + type.toString(16) + \") at offset 0x\" + curpos.toString(16) + \" with \" + (size * 2) + \" bytes\");\n                    break;\n                }\n            }\n\n            curpos += size * 2;\n        }\n\n        if (!all) {\n            throw new WMFJSError(\"Could not read all records\");\n        }\n    }\n\n    play(gdi: GDIContext) {\n        const len = this._records.length;\n        for (let i = 0; i < len; i++) {\n            this._records[i].call(this, gdi);\n        }\n    }\n}\n","/*\n\nThe MIT License (MIT)\n\nCopyright (c) 2015 Thomas Bluemel\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n\nimport { Blob } from \"./Blob\";\nimport { GDIContext } from \"./GDIContext\";\nimport { Helper, WMFJSError } from \"./Helper\";\nimport { WMFRecords } from \"./WMFRecords\";\n\nexport class RendererSettings {\n    width: string;\n    height: string;\n    xExt: number;\n    yExt: number;\n    mapMode: number;\n}\n\nexport class Renderer {\n    _img: WMF;\n\n    constructor(blob: ArrayBuffer) {\n        this.parse(blob);\n        Helper.log(\"WMFJS.Renderer instantiated\");\n    }\n\n    parse(blob: ArrayBuffer) {\n        this._img = null;\n\n        const reader = new Blob(blob);\n\n        let type;\n        let size;\n        let placable;\n        let headerstart;\n        const key = reader.readUint32();\n        if (key == 0x9ac6cdd7) {\n            placable = new WMFPlacable(reader);\n            headerstart = reader.pos;\n            type = reader.readUint16();\n            size = reader.readUint16();\n        } else {\n            headerstart = 0;\n            type = key & 0xffff;\n            size = (key >>> 16) & 0xffff;\n        }\n        switch (type) {\n            case Helper.GDI.MetafileType.MEMORYMETAFILE:\n            case Helper.GDI.MetafileType.DISKMETAFILE:\n                if (size == Helper.GDI.METAHEADER_SIZE / 2) {\n                    const version = reader.readUint16();\n                    switch (version) {\n                        case Helper.GDI.MetafileVersion.METAVERSION100:\n                        case Helper.GDI.MetafileVersion.METAVERSION300:\n                            this._img = new WMF(reader, placable, version, headerstart + (size * 2));\n                            break;\n                    }\n                }\n                break;\n        }\n\n        if (this._img == null) {\n            throw new WMFJSError(\"Format not recognized\");\n        }\n    }\n\n    _render(svg: any, mapMode: number, xExt: number, yExt: number) {\n        // See https://www-user.tu-chemnitz.de/~ygu/petzold/ch18b.htm\n        const gdi = new GDIContext(svg);\n        gdi.setViewportExt(xExt, yExt);\n        gdi.setMapMode(mapMode);\n        Helper.log(\"[WMF] BEGIN RENDERING --->\");\n        this._img.render(gdi);\n        Helper.log(\"[WMF] <--- DONE RENDERING\");\n    }\n\n    render(info: RendererSettings) {\n        const inst = this;\n        const img = (function(mapMode, xExt, yExt) {\n            return ($(\"<div>\") as any).svg({\n                onLoad(svg: any) {\n                    return inst._render.call(inst, svg, mapMode, xExt, yExt);\n                },\n                settings: {\n                    viewBox: [0, 0, xExt, yExt].join(\" \"),\n                    preserveAspectRatio: \"none\", // TODO: MM_ISOTROPIC vs MM_ANISOTROPIC\n                },\n            });\n        })(info.mapMode, info.xExt, info.yExt);\n        const svgContainer = ($(img[0]) as any).svg(\"get\");\n        return $(svgContainer.root()).attr(\"width\", info.width).attr(\"height\", info.height);\n    }\n}\n\nexport class WMFRect16 {\n    left: number;\n    top: number;\n    right: number;\n    bottom: number;\n\n    constructor(reader: Blob) {\n        this.left = reader.readInt16();\n        this.top = reader.readInt16();\n        this.right = reader.readInt16();\n        this.bottom = reader.readInt16();\n    }\n\n    toString() {\n        return \"{left: \" + this.left + \", top: \" + this.top + \", right: \" + this.right + \", bottom: \" + this.bottom + \"}\";\n    }\n}\n\nexport class WMFPlacable {\n    boundingBox: WMFRect16;\n    unitsPerInch: number;\n\n    constructor(reader: Blob) {\n        reader.skip(2);\n        this.boundingBox = new WMFRect16(reader);\n        this.unitsPerInch = reader.readInt16();\n        reader.skip(4);\n        reader.skip(2); // TODO: checksum\n        Helper.log(\"Got bounding box \" + this.boundingBox + \" and \" + this.unitsPerInch + \" units/inch\");\n    }\n}\n\nexport class WMF {\n    _reader: Blob;\n    _version: number;\n    _hdrsize: number;\n    _placable: WMFPlacable;\n    _records: WMFRecords;\n\n    constructor(reader: Blob, placable: WMFPlacable, version: number, hdrsize: number) {\n        this._reader = reader;\n        this._version = version;\n        this._hdrsize = hdrsize;\n        this._placable = placable;\n        this._records = new WMFRecords(reader, this._hdrsize);\n    }\n\n    render(gdi: GDIContext) {\n        this._records.play(gdi);\n    }\n}\n","/*\n\nThe MIT License (MIT)\n\nCopyright (c) 2015 Thomas Bluemel\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n\nexport * from \"./Renderer\";\nexport { WMFJSError as Error, loggingEnabled } from \"./Helper\";\n"],"names":["__extends"],"mappings":"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"}